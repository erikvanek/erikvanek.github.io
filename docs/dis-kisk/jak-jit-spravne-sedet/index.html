
<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jak j√≠t spr√°vnƒõ sedƒõt | Pr≈Øvodce p≈ôed n√°stupem do VTOS</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      line-height: 1.5;
      padding: 20px;
      max-width: 480px;
      margin: 0 auto;
    }
    button {
      padding: 12px 24px;
      font-size: 16px;
      cursor: pointer;
      margin: 8px 4px;
    }
    .screen { min-height: 80vh; }
    h1 { font-size: 24px; margin-bottom: 16px; }
    h2 { font-size: 20px; margin-bottom: 12px; }
    p { margin-bottom: 12px; }
    .option {
      display: block;
      width: 100%;
      text-align: left;
      padding: 16px;
      margin: 8px 0;
      border: 2px solid #ccc;
      background: white;
    }
    .option.selected {
      border-color: #38b4e0;
      background: #e6f7fc;
    }
    .progress {
      background: #eee;
      height: 8px;
      margin-bottom: 20px;
    }
    .progress-bar {
      background: #38b4e0;
      height: 100%;
      transition: width 0.3s;
    }
    .plan-item {
      border: 1px solid #ddd;
      padding: 16px;
      margin: 12px 0;
    }
    .plan-item h3 { font-size: 18px; margin-bottom: 8px; }
    .priority-critical { border-left: 4px solid #dc2626; }
    .priority-important { border-left: 4px solid #f59e0b; }
    .priority-nice { border-left: 4px solid #10b981; }
    .checklist-item {
      padding: 8px 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .checklist-item input { width: 20px; height: 20px; }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 24px;
    }
    .footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #ddd;
      font-size: 14px;
      color: #666;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    const DIAGNOSTIC_QUESTIONS = [
      {
        id: 'family',
        question: 'Star√°≈° se o nƒõkoho?',
        subtext: 'Pom≈Ø≈æe n√°m to p≈ôipravit pl√°n podle tv√© situace.',
        multiSelect: true,
        options: [
          { id: 'children', label: 'M√°m dƒõti', emoji: 'üë∂' },
          { id: 'parents', label: 'Star√°m se o rodiƒçe', emoji: 'üëµ' },
          { id: 'partner', label: 'M√°m partnera/partnerku', emoji: 'üíë' },
          { id: 'none', label: 'O nikoho se nestar√°m', emoji: '‚úì', exclusive: true },
        ]
      },
      {
        id: 'finance',
        question: 'Jak jsi na tom s financemi?',
        subtext: 'Vyber v≈°e, co plat√≠.',
        multiSelect: true,
        options: [
          { id: 'debts', label: 'M√°m dluhy nebo exekuce', emoji: 'üí∞' },
          { id: 'property', label: 'M√°m majetek (byt, auto)', emoji: 'üè†' },
          { id: 'job', label: 'M√°m pr√°ci', emoji: 'üíº' },
          { id: 'none', label: 'Nic z toho', emoji: '‚úì', exclusive: true },
        ]
      },
      {
        id: 'health',
        question: 'M√°≈° nƒõjak√© zdravotn√≠ pot≈ôeby?',
        subtext: 'Vyber v≈°e, co plat√≠.',
        multiSelect: true,
        options: [
          { id: 'medications', label: 'Beru pravidelnƒõ l√©ky', emoji: 'üíä' },
          { id: 'conditions', label: 'M√°m chronick√© onemocnƒõn√≠', emoji: 'üè•' },
          { id: 'addiction', label: '≈òe≈°√≠m z√°vislost', emoji: 'üö≠' },
          { id: 'none', label: 'Nic z toho', emoji: '‚úì', exclusive: true },
        ]
      },
      {
        id: 'timeframe',
        question: 'Kolik ƒçasu m√°≈° do n√°stupu?',
        subtext: 'P≈ôizp≈Øsob√≠me priority.',
        multiSelect: false,
        options: [
          { id: 'week', label: 'M√©nƒõ ne≈æ t√Ωden', emoji: '‚ö°' },
          { id: '2weeks', label: '1-2 t√Ωdny', emoji: 'üìÖ' },
          { id: 'month', label: '2-4 t√Ωdny', emoji: 'üìÜ' },
          { id: 'more', label: 'V√≠c ne≈æ mƒõs√≠c', emoji: 'üóìÔ∏è' },
          { id: 'unknown', label: 'Nev√≠m', emoji: '‚ùì' },
        ]
      },
    ];

    const PLAN_ITEMS = [
      {
        id: 'children-care',
        title: 'P√©ƒçe o dƒõti',
        priority: 'critical',
        description: 'Zajisti, kdo se postar√° o tv√© dƒõti bƒõhem v√Ωkonu trestu.',
        conditions: [{ field: 'family', includes: 'children' }],
        checklist: [
          { id: 1, text: 'Domluvit s partnerkou/rodinou kdo p≈ôevezme p√©ƒçi' },
          { id: 2, text: 'Pokud nem√°≈° nikoho, kontaktovat OSPOD' },
          { id: 3, text: 'P≈ôipravit dƒõti na situaci' },
          { id: 4, text: 'Zajistit ≈°kolu/≈°kolku (omluvenky, kontakty)' },
        ]
      },
      {
        id: 'debts',
        title: 'Dluhy a exekuce',
        priority: 'critical',
        description: 'P≈ôed n√°stupem je dobr√© m√≠t p≈ôehled o dluz√≠ch.',
        conditions: [{ field: 'finance', includes: 'debts' }],
        checklist: [
          { id: 1, text: 'Zjistit stav dluh≈Ø (v√Ωpis z registru)' },
          { id: 2, text: 'Kontaktovat vƒõ≈ôitele a informovat o situaci' },
          { id: 3, text: 'Zv√°≈æit oddlu≈æen√≠ (osobn√≠ bankrot)' },
        ]
      },
      {
        id: 'medications',
        title: 'L√©ky a zdrav√≠',
        priority: 'critical',
        description: 'Zajisti si dostatek l√©k≈Ø a zdravotn√≠ dokumentaci.',
        conditions: [{ field: 'health', includes: 'medications' }],
        checklist: [
          { id: 1, text: 'Zajistit z√°sobu l√©k≈Ø na prvn√≠ t√Ωdny' },
          { id: 2, text: 'P≈ôipravit seznam l√©k≈Ø a diagn√≥z' },
          { id: 3, text: 'Z√≠skat zpr√°vu od l√©ka≈ôe' },
        ]
      },
      {
        id: 'job',
        title: 'Zamƒõstn√°n√≠',
        priority: 'important',
        description: '≈òe≈° situaci se zamƒõstnavatelem.',
        conditions: [{ field: 'finance', includes: 'job' }],
        checklist: [
          { id: 1, text: 'Informovat zamƒõstnavatele' },
          { id: 2, text: 'Zjistit mo≈ænosti (neplacen√© volno vs. v√Ωpovƒõƒè)' },
          { id: 3, text: 'Vy≈ô√≠dit pot≈ôebn√© dokumenty' },
        ]
      },
      {
        id: 'property',
        title: 'Majetek a bydlen√≠',
        priority: 'important',
        description: 'Zajisti sv≈Øj majetek po dobu trestu.',
        conditions: [{ field: 'finance', includes: 'property' }],
        checklist: [
          { id: 1, text: 'Rozhodnout co s bytem/domem' },
          { id: 2, text: 'Zajistit platby (n√°jem, energie)' },
          { id: 3, text: 'Uschovat cennosti' },
        ]
      },
      {
        id: 'partner-communication',
        title: 'Komunikace s partnerem',
        priority: 'important',
        description: 'Domluv se s partnerem na fungov√°n√≠ bƒõhem trestu.',
        conditions: [{ field: 'family', includes: 'partner' }],
        checklist: [
          { id: 1, text: 'Probrat finanƒçn√≠ zaji≈°tƒõn√≠' },
          { id: 2, text: 'Domluvit se na n√°v≈°tƒõv√°ch' },
          { id: 3, text: 'Nastavit komunikaƒçn√≠ pravidla' },
        ]
      },
      {
        id: 'documents',
        title: 'D≈Øle≈æit√© dokumenty',
        priority: 'nice_to_have',
        description: 'P≈ôiprav si dokumenty, kter√© bude≈° pot≈ôebovat.',
        conditions: [],
        checklist: [
          { id: 1, text: 'Obƒçansk√Ω pr≈Økaz' },
          { id: 2, text: 'Kartiƒçka poji≈°tƒõnce' },
          { id: 3, text: 'Rozsudek' },
          { id: 4, text: 'P≈ôedvol√°n√≠ k n√°stupu' },
        ]
      },
      {
        id: 'what-to-pack',
        title: 'Co si vz√≠t s sebou',
        priority: 'nice_to_have',
        description: 'Seznam povolen√Ωch vƒõc√≠ p≈ôi n√°stupu.',
        conditions: [],
        checklist: [
          { id: 1, text: 'Osobn√≠ hygiena (z√°kladn√≠)' },
          { id: 2, text: 'Spodn√≠ pr√°dlo a pono≈æky' },
          { id: 3, text: 'Fotky rodiny (max 5)' },
          { id: 4, text: 'Kontakty na bl√≠zk√© (na pap√≠≈ôe)' },
        ]
      },
    ];

    function useLocalStorage(key, initialValue) {
      const [value, setValue] = useState(() => {
        try {
          const stored = localStorage.getItem(key);
          return stored ? JSON.parse(stored) : initialValue;
        } catch {
          return initialValue;
        }
      });

      useEffect(() => {
        localStorage.setItem(key, JSON.stringify(value));
      }, [key, value]);

      return [value, setValue];
    }

    function generatePlan(responses) {
      return PLAN_ITEMS.filter(item => {
        if (item.conditions.length === 0) return true;
        return item.conditions.some(cond => {
          const userValue = responses[cond.field] || [];
          return userValue.includes(cond.includes);
        });
      }).sort((a, b) => {
        const order = { critical: 0, important: 1, nice_to_have: 2 };
        return order[a.priority] - order[b.priority];
      });
    }

    function LandingScreen({ onStart, onFamily, onExpert }) {
      return (
        <div className="screen">
          <h1 id="dostal-jsi-rozsudek-a-nev-co-dlat">Dostal jsi rozsudek a nev√≠≈° co dƒõlat?</h1>
          <p>Pom≈Ø≈æeme ti zorientovat se. Za 10 minut bude≈° m√≠t jasn√Ω pl√°n.</p>
          <button onClick={onStart} style={{ background: '#38b4e0', color: 'white', border: 'none', width: '100%', fontSize: '18px', padding: '16px' }}>
            Zaƒç√≠t
          </button>
          <p style={{ marginTop: '32px', color: '#666' }}>Nebo:</p>
          <button onClick={onFamily} className="option">Jsem bl√≠zk√Ω odsouzen√©ho ‚Üí</button>
          <button onClick={onExpert} className="option">Jsem odborn√≠k v poradnƒõ ‚Üí</button>
          <div className="footer">
            Projekt vznikl ve spolupr√°ci s <a href="https://sovia.cz" target="_blank">Sovia z.s.</a>
            <br /><small>M√°m rozsudek a co d√°l?</small>
          </div>
        </div>
      );
    }

    function DiagnosticScreen({ question, questionIndex, totalQuestions, responses, onAnswer, onNext, onBack }) {
      const q = question;
      const currentValue = responses[q.id] || [];

      const handleOptionClick = (optionId, exclusive) => {
        let newValue;
        if (q.multiSelect) {
          if (exclusive) {
            newValue = [optionId];
          } else {
            if (currentValue.includes(optionId)) {
              newValue = currentValue.filter(v => v !== optionId);
            } else {
              newValue = [...currentValue.filter(v => {
                const opt = q.options.find(o => o.id === v);
                return !opt?.exclusive;
              }), optionId];
            }
          }
        } else {
          newValue = optionId;
        }
        onAnswer(q.id, q.multiSelect ? newValue : [newValue]);
      };

      const canContinue = currentValue.length > 0;

      return (
        <div className="screen">
          <div className="progress">
            <div className="progress-bar" style={{ width: `${((questionIndex + 1) / totalQuestions) * 100}%` }} />
          </div>
          <small style={{ color: '#666' }}>Krok {questionIndex + 1} z {totalQuestions}</small>
          <h2 style={{ marginTop: '12px' }}>{q.question}</h2>
          <p style={{ color: '#666' }}>{q.subtext}</p>
          <div style={{ marginTop: '20px' }}>
            {q.options.map(opt => (
              <button key={opt.id} className={`option ${currentValue.includes(opt.id) ? 'selected' : ''}`} onClick={() => handleOptionClick(opt.id, opt.exclusive)}>
                {opt.emoji} {opt.label}
              </button>
            ))}
          </div>
          {q.multiSelect && <small style={{ color: '#666' }}>(m≈Ø≈æe≈° vybrat v√≠c mo≈ænost√≠)</small>}
          <div className="nav-buttons">
            <button onClick={onBack} disabled={questionIndex === 0}>‚Üê Zpƒõt</button>
            <button onClick={onNext} disabled={!canContinue} style={{ background: canContinue ? '#38b4e0' : '#ccc', color: 'white', border: 'none' }}>
              Pokraƒçovat ‚Üí
            </button>
          </div>
        </div>
      );
    }

    function PlanScreen({ plan, completed, onToggle, onItemClick, onReset }) {
      const completedCount = plan.reduce((acc, item) => acc + item.checklist.filter(c => completed[`${item.id}:${c.id}`]).length, 0);
      const totalCount = plan.reduce((acc, item) => acc + item.checklist.length, 0);

      return (
        <div className="screen">
          <h1 id="tvj-pln">Tv≈Øj pl√°n</h1>
          <p>Dokonƒçeno: {completedCount} / {totalCount} √∫kol≈Ø</p>
          <div className="progress">
            <div className="progress-bar" style={{ width: `${(completedCount / totalCount) * 100}%` }} />
          </div>
          {['critical', 'important', 'nice_to_have'].map(priority => {
            const items = plan.filter(i => i.priority === priority);
            if (items.length === 0) return null;
            const labels = { critical: 'üî¥ UDƒöLEJ IHNED', important: 'üü° D≈ÆLE≈ΩIT√â', nice_to_have: 'üü¢ P≈òED N√ÅSTUPEM' };
            return (
              <div key={priority}>
                <h3 style={{ marginTop: '24px', marginBottom: '12px' }}>{labels[priority]}</h3>
                {items.map(item => (
                  <div key={item.id} className={`plan-item priority-${priority === 'nice_to_have' ? 'nice' : priority}`} onClick={() => onItemClick(item)} style={{ cursor: 'pointer' }}>
                    <h3 id="itemtitle">{item.title}</h3>
                    <p style={{ color: '#666', fontSize: '14px' }}>{item.description}</p>
                    <small>{item.checklist.filter(c => completed[`${item.id}:${c.id}`]).length} / {item.checklist.length} hotovo</small>
                  </div>
                ))}
              </div>
            );
          })}
          <div className="footer">
            <button onClick={onReset} style={{ fontSize: '14px' }}>Zaƒç√≠t znovu</button>
            <br /><br />
            Projekt <a href="https://sovia.cz" target="_blank">Sovia z.s.</a> ‚Äì M√°m rozsudek a co d√°l?
          </div>
        </div>
      );
    }

    function ItemDetailScreen({ item, completed, onToggle, onBack }) {
      return (
        <div className="screen">
          <button onClick={onBack} style={{ marginBottom: '16px' }}>‚Üê Zpƒõt na pl√°n</button>
          <h1 id="itemtitle">{item.title}</h1>
          <p>{item.description}</p>
          <h3 style={{ marginTop: '24px' }}>Co je pot≈ôeba udƒõlat:</h3>
          {item.checklist.map(check => {
            const key = `${item.id}:${check.id}`;
            return (
              <label key={check.id} className="checklist-item">
                <input type="checkbox" checked={!!completed[key]} onChange={() => onToggle(key)} />
                <span style={{ textDecoration: completed[key] ? 'line-through' : 'none', color: completed[key] ? '#999' : 'inherit' }}>{check.text}</span>
              </label>
            );
          })}
        </div>
      );
    }

    function FamilyScreen({ onBack }) {
      return (
        <div className="screen">
          <button onClick={onBack}>‚Üê Zpƒõt</button>
          <h1 style={{ marginTop: '16px' }}>Pro rodiny a bl√≠zk√©</h1>
          <p>Tv≈Øj bl√≠zk√Ω nastupuje do vƒõzen√≠. Je to tƒõ≈æk√° situace pro v√°s oba.</p>
          <h3 style={{ marginTop: '24px' }}>Jak mu pomoci TEƒé</h3>
          <ul style={{ paddingLeft: '20px' }}><li>Pomoz mu s checklistem vƒõc√≠ k vy≈ô√≠zen√≠</li><li>Nab√≠dni se, ≈æe nƒõco vy≈ô√≠d√≠≈° za nƒõj</li><li>Doprovod ho k br√°nƒõ vƒõznice</li></ul>
          <h3 style={{ marginTop: '24px' }}>Co nepom√°h√°</h3>
          <ul style={{ paddingLeft: '20px' }}><li>"J√° ti to ≈ô√≠kal/a"</li><li>"Ty ses do toho dostal s√°m"</li><li>Vyh√Ωb√°n√≠ se t√©matu</li></ul>
          <div className="footer">Projekt <a href="https://sovia.cz" target="_blank">Sovia z.s.</a></div>
        </div>
      );
    }

    function ExpertScreen({ onBack }) {
      return (
        <div className="screen">
          <button onClick={onBack}>‚Üê Zpƒõt</button>
          <h1 style={{ marginTop: '16px' }}>Pro odborn√≠ky</h1>
          <p>Tento n√°stroj m≈Ø≈æete vyu≈æ√≠t p≈ôi pr√°ci s klienty p≈ôed n√°stupem do VTOS.</p>
          <h3 style={{ marginTop: '24px' }}>Jak n√°stroj vyu≈æ√≠t</h3>
          <ul style={{ paddingLeft: '20px' }}><li>Projdƒõte diagnostiku spoleƒçnƒõ s klientem</li><li>Vygenerovan√Ω pl√°n slou≈æ√≠ jako z√°klad pro dal≈°√≠ pr√°ci</li><li>Checklisty lze vytisknout</li></ul>
          <div className="footer">Projekt <a href="https://sovia.cz" target="_blank">Sovia z.s.</a> ‚Äì M√°m rozsudek a co d√°l?</div>
        </div>
      );
    }

    function App() {
      const [screen, setScreen] = useState('landing');
      const [questionIndex, setQuestionIndex] = useState(0);
      const [responses, setResponses] = useLocalStorage('vtos-responses', {});
      const [completed, setCompleted] = useLocalStorage('vtos-completed', {});
      const [selectedItem, setSelectedItem] = useState(null);

      const plan = useMemo(() => generatePlan(responses), [responses]);

      const handleAnswer = (field, value) => {
        setResponses(prev => ({ ...prev, [field]: value }));
      };

      const handleNext = () => {
        if (questionIndex < DIAGNOSTIC_QUESTIONS.length - 1) {
          setQuestionIndex(prev => prev + 1);
        } else {
          setScreen('plan');
        }
      };

      const handleBack = () => {
        if (questionIndex > 0) {
          setQuestionIndex(prev => prev - 1);
        } else {
          setScreen('landing');
        }
      };

      const handleToggle = (key) => {
        setCompleted(prev => ({ ...prev, [key]: !prev[key] }));
      };

      const handleReset = () => {
        setResponses({});
        setCompleted({});
        setQuestionIndex(0);
        setScreen('landing');
      };

      if (screen === 'landing') {
        return <LandingScreen onStart={() => setScreen('diagnostic')} onFamily={() => setScreen('family')} onExpert={() => setScreen('expert')} />;
      }
      if (screen === 'diagnostic') {
        return <DiagnosticScreen question={DIAGNOSTIC_QUESTIONS[questionIndex]} questionIndex={questionIndex} totalQuestions={DIAGNOSTIC_QUESTIONS.length} responses={responses} onAnswer={handleAnswer} onNext={handleNext} onBack={handleBack} />;
      }
      if (screen === 'plan') {
        return <PlanScreen plan={plan} completed={completed} onToggle={handleToggle} onItemClick={(item) => { setSelectedItem(item); setScreen('detail'); }} onReset={handleReset} />;
      }
      if (screen === 'detail' && selectedItem) {
        return <ItemDetailScreen item={selectedItem} completed={completed} onToggle={handleToggle} onBack={() => setScreen('plan')} />;
      }
      if (screen === 'family') {
        return <FamilyScreen onBack={() => setScreen('landing')} />;
      }
      if (screen === 'expert') {
        return <ExpertScreen onBack={() => setScreen('landing')} />;
      }
      return <div>Nƒõco se pokazilo...</div>;
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>