<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jak j√≠t spr√°vnƒõ sedƒõt | Pr≈Øvodce p≈ôed n√°stupem do VTOS</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      line-height: 1.6;
      padding: 20px;
      max-width: 480px;
      margin: 0 auto;
      background: #fafafa;
    }
    button {
      padding: 12px 24px;
      font-size: 16px;
      cursor: pointer;
      margin: 8px 4px;
      border-radius: 8px;
    }
    .screen { min-height: 80vh; }
    h1 { font-size: 24px; margin-bottom: 16px; color: #1a1a1a; }
    h2 { font-size: 20px; margin-bottom: 12px; color: #1a1a1a; }
    h3 { font-size: 16px; margin-bottom: 8px; color: #333; }
    p { margin-bottom: 12px; color: #444; }
    .option {
      display: block;
      width: 100%;
      text-align: left;
      padding: 16px;
      margin: 8px 0;
      border: 2px solid #ddd;
      background: white;
      border-radius: 12px;
      transition: all 0.2s;
    }
    .option:hover { border-color: #38b4e0; }
    .option.selected {
      border-color: #38b4e0;
      background: #e6f7fc;
    }
    .progress {
      background: #e0e0e0;
      height: 8px;
      margin-bottom: 20px;
      border-radius: 4px;
      overflow: hidden;
    }
    .progress-bar {
      background: linear-gradient(90deg, #38b4e0, #158ebf);
      height: 100%;
      transition: width 0.3s;
    }
    .plan-item {
      border: 1px solid #ddd;
      padding: 16px;
      margin: 12px 0;
      background: white;
      border-radius: 12px;
      transition: all 0.2s;
    }
    .plan-item:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .plan-item h3 { font-size: 18px; margin-bottom: 8px; }
    .priority-critical { border-left: 4px solid #dc2626; }
    .priority-important { border-left: 4px solid #f59e0b; }
    .priority-nice { border-left: 4px solid #10b981; }
    .checklist-item {
      padding: 12px 0;
      display: flex;
      align-items: flex-start;
      gap: 12px;
      border-bottom: 1px solid #eee;
    }
    .checklist-item:last-child { border-bottom: none; }
    .checklist-item input {
      width: 22px;
      height: 22px;
      margin-top: 2px;
      accent-color: #38b4e0;
    }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 24px;
    }
    .footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #ddd;
      font-size: 14px;
      color: #666;
      text-align: center;
    }
    .tip {
      background: #fffbeb;
      border: 1px solid #fbbf24;
      border-radius: 8px;
      padding: 12px;
      margin: 16px 0;
      font-size: 14px;
    }
    .warning {
      background: #fef2f2;
      border: 1px solid #dc2626;
      border-radius: 8px;
      padding: 12px;
      margin: 16px 0;
      font-size: 14px;
    }
    .contact-card {
      background: #f0f9ff;
      border: 1px solid #38b4e0;
      border-radius: 8px;
      padding: 12px;
      margin: 12px 0;
    }
    .contact-card a {
      color: #158ebf;
      font-weight: 600;
    }
    .badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      margin-right: 8px;
    }
    .badge-critical { background: #fecaca; color: #991b1b; }
    .badge-important { background: #fef3c7; color: #92400e; }
    .badge-nice { background: #d1fae5; color: #065f46; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    // =====================================================
    // DATA - ROZ≈†√ç≈òEN√Å DIAGNOSTIKA
    // =====================================================

    const DIAGNOSTIC_QUESTIONS = [
      {
        id: 'family',
        question: 'Star√°≈° se o nƒõkoho?',
        subtext: 'Pom≈Ø≈æe n√°m to p≈ôipravit pl√°n podle tv√© situace.',
        multiSelect: true,
        options: [
          { id: 'children', label: 'M√°m dƒõti (nebo jsem jejich hlavn√≠ peƒçovatel)', emoji: 'üë∂' },
          { id: 'parents', label: 'Star√°m se o rodiƒçe nebo jin√© p≈ô√≠buzn√©', emoji: 'üëµ' },
          { id: 'partner', label: 'M√°m partnera/partnerku', emoji: 'üíë' },
          { id: 'pets', label: 'M√°m dom√°c√≠ zv√≠≈ôata', emoji: 'üêï' },
          { id: 'none', label: 'O nikoho se nestar√°m', emoji: '‚úì', exclusive: true },
        ]
      },
      {
        id: 'housing',
        question: 'Jak√° je tv√° bytov√° situace?',
        subtext: 'Pom≈Ø≈æe n√°m zjistit, co bude pot≈ôeba vy≈ôe≈°it.',
        multiSelect: false,
        options: [
          { id: 'rent', label: 'Bydl√≠m v n√°jmu', emoji: 'üè¢' },
          { id: 'own', label: 'Vlastn√≠m byt nebo d≈Øm', emoji: 'üè†' },
          { id: 'family', label: 'Bydl√≠m u rodiny', emoji: 'üë®‚Äçüë©‚Äçüëß' },
          { id: 'social', label: 'Soci√°ln√≠ bydlen√≠ / ubytovna', emoji: 'üè®' },
          { id: 'none', label: 'Nem√°m st√°l√© bydlen√≠', emoji: '‚ùì' },
        ]
      },
      {
        id: 'finance',
        question: 'Jak jsi na tom s financemi?',
        subtext: 'Vyber v≈°e, co plat√≠.',
        multiSelect: true,
        options: [
          { id: 'debts', label: 'M√°m dluhy nebo exekuce', emoji: 'üí∞' },
          { id: 'job', label: 'M√°m pr√°ci (zamƒõstnanec nebo OSVƒå)', emoji: 'üíº' },
          { id: 'car', label: 'M√°m auto (vlastn√≠ nebo na leasing)', emoji: 'üöó' },
          { id: 'benefits', label: 'Pob√≠r√°m d√°vky nebo d≈Øchod', emoji: 'üìã' },
          { id: 'none', label: 'Nic z toho', emoji: '‚úì', exclusive: true },
        ]
      },
      {
        id: 'health',
        question: 'M√°≈° nƒõjak√© zdravotn√≠ pot≈ôeby?',
        subtext: 'Vyber v≈°e, co plat√≠.',
        multiSelect: true,
        options: [
          { id: 'medications', label: 'Beru pravidelnƒõ l√©ky na p≈ôedpis', emoji: 'üíä' },
          { id: 'conditions', label: 'M√°m chronick√© onemocnƒõn√≠', emoji: 'üè•' },
          { id: 'mental', label: '≈òe≈°√≠m psychick√© pot√≠≈æe', emoji: 'üß†' },
          { id: 'addiction', label: '≈òe≈°√≠m z√°vislost (alkohol, drogy, hr√°ƒçstv√≠)', emoji: 'üö≠' },
          { id: 'none', label: 'Nic z toho', emoji: '‚úì', exclusive: true },
        ]
      },
      {
        id: 'legal',
        question: 'M√°≈° u≈æ rozsudek?',
        subtext: 'Podle toho uprav√≠me doporuƒçen√≠.',
        multiSelect: false,
        options: [
          { id: 'final', label: 'Ano, rozsudek je pravomocn√Ω', emoji: 'üìú' },
          { id: 'appeal', label: 'Podal jsem odvol√°n√≠', emoji: '‚öñÔ∏è' },
          { id: 'waiting', label: 'ƒåek√°m na p≈ôedvol√°n√≠ k n√°stupu', emoji: 'üì¨' },
          { id: 'summons', label: 'M√°m p≈ôedvol√°n√≠ k n√°stupu', emoji: 'üìã' },
        ]
      },
      {
        id: 'timeframe',
        question: 'Kolik ƒçasu m√°≈° do n√°stupu?',
        subtext: 'P≈ôizp≈Øsob√≠me priority podle ƒçasu.',
        multiSelect: false,
        options: [
          { id: 'days', label: 'M√©nƒõ ne≈æ t√Ωden', emoji: '‚ö°' },
          { id: '2weeks', label: '1-2 t√Ωdny', emoji: 'üìÖ' },
          { id: 'month', label: '2-4 t√Ωdny', emoji: 'üìÜ' },
          { id: 'more', label: 'V√≠c ne≈æ mƒõs√≠c', emoji: 'üóìÔ∏è' },
          { id: 'unknown', label: 'Je≈°tƒõ nev√≠m', emoji: '‚ùì' },
        ]
      },
    ];

    // =====================================================
    // DATA - ROZ≈†√ç≈òEN√â PLAN ITEMS
    // =====================================================

    const PLAN_ITEMS = [
      // CRITICAL - V≈ΩDY ZOBRAZIT
      {
        id: 'entry-day',
        title: 'Den n√°stupu - co pot≈ôebuje≈° vƒõdƒõt',
        priority: 'critical',
        description: 'Z√°kladn√≠ informace o tom, jak prob√≠h√° n√°stup do v√Ωkonu trestu.',
        conditions: [],
        tips: ['P≈ôijƒè st≈ô√≠zliv√Ω a vƒças - pozdn√≠ p≈ô√≠chod m≈Ø≈æe m√≠t v√°≈æn√© n√°sledky.'],
        checklist: [
          { id: 1, text: 'Zjistit p≈ôesnou adresu a ƒças n√°stupu (je v p≈ôedvol√°n√≠)' },
          { id: 2, text: 'Napl√°novat cestu - radƒõji s rezervou' },
          { id: 3, text: 'P≈ôipravit si obƒçanku a p≈ôedvol√°n√≠ k n√°stupu' },
          { id: 4, text: 'Sbalit povolen√© vƒõci (viz checklist n√≠≈æe)' },
          { id: 5, text: 'Rozlouƒçit se s bl√≠zk√Ωmi - m≈Ø≈æe≈° je vz√≠t a≈æ k br√°nƒõ' },
          { id: 6, text: 'Nechat doma telefon, pen√≠ze a cennosti' },
        ]
      },

      // CRITICAL - PODM√çNƒöN√â
      {
        id: 'children-care',
        title: 'P√©ƒçe o dƒõti',
        priority: 'critical',
        description: 'Zajisti, kdo se postar√° o tv√© dƒõti bƒõhem v√Ωkonu trestu.',
        conditions: [{ field: 'family', includes: 'children' }],
        warning: 'Pokud nem√°≈° nikoho, kdo by se o dƒõti postaral, kontaktuj OSPOD co nejd≈ô√≠ve!',
        tips: ['Dƒõti zvl√°daj√≠ situaci l√©pe, kdy≈æ se s nimi mluv√≠ p≈ô√≠mo a p≈ôimƒõ≈ôenƒõ jejich vƒõku.'],
        checklist: [
          { id: 1, text: 'Domluvit s partnerkou/rodinou kdo p≈ôevezme p√©ƒçi' },
          { id: 2, text: 'Pokud nen√≠ nikdo - kontaktovat OSPOD ihned' },
          { id: 3, text: 'P≈ôipravit dƒõti na situaci (m√°me materi√°ly, jak na to)' },
          { id: 4, text: 'Informovat ≈°kolu/≈°kolku o situaci' },
          { id: 5, text: 'Zajistit kontakty - komu m≈Ø≈æe ≈°kola volat' },
          { id: 6, text: 'Domluivt zp≈Øsob komunikace s dƒõtmi (dopisy, n√°v≈°tƒõvy)' },
        ]
      },
      {
        id: 'medications',
        title: 'L√©ky a zdravotn√≠ dokumentace',
        priority: 'critical',
        description: 'Bez l√©k≈Ø a dokumentace m≈Ø≈æe≈° m√≠t ve vƒõznici probl√©my.',
        conditions: [{ field: 'health', includes: 'medications' }],
        warning: 'Vezmi si z√°sobu l√©k≈Ø alespo≈à na 14 dn√≠ a zpr√°vu od l√©ka≈ôe!',
        checklist: [
          { id: 1, text: 'Nav≈°t√≠vit l√©ka≈ôe a z√≠skat aktu√°ln√≠ zpr√°vu' },
          { id: 2, text: 'P≈ôipravit seznam v≈°ech l√©k≈Ø (n√°zvy, d√°vkov√°n√≠)' },
          { id: 3, text: 'Zajistit z√°sobu l√©k≈Ø na 14+ dn√≠' },
          { id: 4, text: 'Zjistit, jestli jsou l√©ky povolen√© (nƒõkter√© ne)' },
          { id: 5, text: 'P≈ôipravit kartiƒçku poji≈°tƒõnce' },
        ]
      },
      {
        id: 'debts',
        title: 'Dluhy a exekuce',
        priority: 'critical',
        description: 'Bƒõhem trestu dluhy nezmiz√≠ - naopak mohou r≈Øst. Ale d√° se to ≈ôe≈°it.',
        conditions: [{ field: 'finance', includes: 'debts' }],
        tips: ['Ve vƒõznici m≈Ø≈æe≈° po≈æ√°dat o oddlu≈æen√≠ (osobn√≠ bankrot) - porad√≠ ti soci√°ln√≠ pracovn√≠k.'],
        checklist: [
          { id: 1, text: 'Zjistit p≈ôehled dluh≈Ø - v√Ωpis z registru dlu≈æn√≠k≈Ø' },
          { id: 2, text: 'Kontaktovat dluhovou poradnu (je zdarma)' },
          { id: 3, text: 'Informovat exekutory o n√°stupu do VTOS' },
          { id: 4, text: 'Zv√°≈æit oddlu≈æen√≠ (osobn√≠ bankrot)' },
          { id: 5, text: 'Zajistit, aby nƒõkdo vyb√≠ral po≈°tu (√∫≈ôedn√≠ dopisy)' },
        ]
      },
      {
        id: 'mental-health',
        title: 'Psychick√° pohoda',
        priority: 'critical',
        description: 'Je norm√°ln√≠ m√≠t strach nebo √∫zkost. Existuje pomoc.',
        conditions: [{ field: 'health', includes: 'mental' }],
        tips: ['Krizov√° linka 116 123 funguje 24/7, je zdarma a anonymn√≠.'],
        checklist: [
          { id: 1, text: 'Promluvit s nƒõk√Ωm bl√≠zk√Ωm o sv√Ωch pocitech' },
          { id: 2, text: 'Zv√°≈æit n√°v≈°tƒõvu psychologa p≈ôed n√°stupem' },
          { id: 3, text: 'Ulo≈æit si ƒç√≠slo krizov√© linky: 116 123' },
          { id: 4, text: 'P≈ôipravit zpr√°vu od psychiatra (pokud ho m√°≈°)' },
          { id: 5, text: 'Zjistit mo≈ænosti terapie ve vƒõznici' },
        ]
      },
      {
        id: 'addiction',
        title: 'Z√°vislost - co vƒõdƒõt',
        priority: 'critical',
        description: 'Ve vƒõznici jsou programy pro lidi se z√°vislost√≠. M≈Ø≈æe≈° to vyu≈æ√≠t.',
        conditions: [{ field: 'health', includes: 'addiction' }],
        tips: ['Buƒè up≈ô√≠mn√Ω p≈ôi vstupn√≠m pohovoru - pomohou ti naj√≠t vhodn√Ω program.'],
        checklist: [
          { id: 1, text: 'Informovat se o l√©ƒçebn√Ωch programech ve vƒõznici' },
          { id: 2, text: 'Zv√°≈æit n√°stup do l√©ƒçebny p≈ôed VTOS (m≈Ø≈æe ovlivnit podm√≠nky)' },
          { id: 3, text: 'P≈ôipravit zpr√°vu od adiktologa (pokud ho m√°≈°)' },
          { id: 4, text: 'Kontaktovat organizaci pro z√°visl√© (Sananim, Drop In...)' },
        ]
      },

      // IMPORTANT - PR√ÅCE A BYDLEN√ç
      {
        id: 'job',
        title: 'Zamƒõstn√°n√≠',
        priority: 'important',
        description: 'Zamƒõstnavatel se to dozv√≠. Lep≈°√≠ je to ≈ô√≠ct s√°m.',
        conditions: [{ field: 'finance', includes: 'job' }],
        tips: ['Nƒõkter√© profese vy≈æaduj√≠ ƒçist√Ω rejst≈ô√≠k - zeptej se, jak√© m√°≈° mo≈ænosti po n√°vratu.'],
        checklist: [
          { id: 1, text: 'Informovat zamƒõstnavatele o situaci' },
          { id: 2, text: 'Zjistit mo≈ænosti: neplacen√© volno, v√Ωpovƒõƒè, dohoda' },
          { id: 3, text: 'Po≈æ√°dat o potvrzen√≠ o zamƒõstn√°n√≠' },
          { id: 4, text: 'Vy≈ô√≠dit p≈ô√≠padnou v√Ωpovƒõƒè p√≠semnƒõ' },
          { id: 5, text: 'Zjistit n√°rok na podporu v nezamƒõstnanosti po n√°vratu' },
        ]
      },
      {
        id: 'rent',
        title: 'N√°jem a bydlen√≠',
        priority: 'important',
        description: 'Pokud bydl√≠≈° v n√°jmu, mus√≠≈° vy≈ôe≈°it co s bytem.',
        conditions: [{ field: 'housing', includes: 'rent' }],
        checklist: [
          { id: 1, text: 'Rozhodnout: ukonƒçit n√°jem nebo ponechat?' },
          { id: 2, text: 'Informovat pronaj√≠matele o situaci' },
          { id: 3, text: 'Pokud ukonƒçuje≈°: podat v√Ωpovƒõƒè (pozor na lh≈Øty!)' },
          { id: 4, text: 'Pokud nech√°v√°≈°: zajistit platby (partner, rodina)' },
          { id: 5, text: 'Vyklidit osobn√≠ vƒõci nebo zajistit √∫schovu' },
          { id: 6, text: 'P≈ôesmƒõrovat po≈°tu na jinou adresu' },
        ]
      },
      {
        id: 'own-housing',
        title: 'Vlastn√≠ nemovitost',
        priority: 'important',
        description: 'Co s bytem nebo domem, kdy≈æ bude≈° pryƒç.',
        conditions: [{ field: 'housing', includes: 'own' }],
        checklist: [
          { id: 1, text: 'Zajistit platby hypot√©ky, energi√≠, poji≈°tƒõn√≠' },
          { id: 2, text: 'Domluvit nƒõkoho, kdo bude dohl√≠≈æet na nemovitost' },
          { id: 3, text: 'Zv√°≈æit pron√°jem (p≈ô√≠jem bƒõhem trestu)' },
          { id: 4, text: 'Zajistit d≈Øle≈æit√© dokumenty a cennosti' },
          { id: 5, text: 'P≈ôesmƒõrovat po≈°tu' },
        ]
      },
      {
        id: 'car',
        title: 'Auto',
        priority: 'important',
        description: 'Co s autem bƒõhem v√Ωkonu trestu.',
        conditions: [{ field: 'finance', includes: 'car' }],
        checklist: [
          { id: 1, text: 'Rozhodnout: prodat, p≈Øjƒçit rodinƒõ, nebo uskladnit?' },
          { id: 2, text: 'Pokud leasing: kontaktovat leasingovou spoleƒçnost' },
          { id: 3, text: 'Vy≈ôe≈°it poji≈°tƒõn√≠ (pozastavit nebo zru≈°it)' },
          { id: 4, text: 'Zajistit parkov√°n√≠, pokud auto nech√°v√°≈°' },
          { id: 5, text: 'Odhl√°sit auto z poji≈°tƒõn√≠ odpovƒõdnosti (pokud nebude jezdit)' },
        ]
      },
      {
        id: 'partner-communication',
        title: 'Komunikace s partnerem',
        priority: 'important',
        description: 'Domluvte se p≈ôedem na fungov√°n√≠ bƒõhem trestu.',
        conditions: [{ field: 'family', includes: 'partner' }],
        checklist: [
          { id: 1, text: 'Probrat finanƒçn√≠ zaji≈°tƒõn√≠ rodiny' },
          { id: 2, text: 'Domluvit se na n√°v≈°tƒõv√°ch (kdy, jak ƒçasto)' },
          { id: 3, text: 'Nastavit pravidla pro dopisy a telefony' },
          { id: 4, text: 'Domluvit plnou moc pro √∫≈ôedn√≠ z√°le≈æitosti' },
          { id: 5, text: 'Probrat oƒçek√°v√°n√≠ ohlednƒõ vztahu' },
        ]
      },
      {
        id: 'parents-care',
        title: 'P√©ƒçe o rodiƒçe / p≈ô√≠buzn√©',
        priority: 'important',
        description: 'Kdo se postar√° o tv√© bl√≠zk√©, o kter√© se star√°≈° ty.',
        conditions: [{ field: 'family', includes: 'parents' }],
        checklist: [
          { id: 1, text: 'Naj√≠t nƒõkoho, kdo p≈ôevezme p√©ƒçi' },
          { id: 2, text: 'Kontaktovat soci√°ln√≠ slu≈æby (peƒçovatelsk√° slu≈æba apod.)' },
          { id: 3, text: 'Zajistit p≈ôed√°n√≠ kl√≠ƒç≈Ø a kontakt≈Ø' },
          { id: 4, text: 'Informovat l√©ka≈ôe rodiƒç≈Ø o zmƒõnƒõ' },
        ]
      },
      {
        id: 'pets',
        title: 'Dom√°c√≠ zv√≠≈ôata',
        priority: 'important',
        description: 'Zv√≠≈ôata do vƒõzen√≠ nem≈Ø≈æe≈°, najdi jim doƒçasn√Ω domov.',
        conditions: [{ field: 'family', includes: 'pets' }],
        checklist: [
          { id: 1, text: 'Naj√≠t nƒõkoho, kdo se o zv√≠≈ôe postar√°' },
          { id: 2, text: 'P≈ôedat oƒçkovac√≠ pr≈Økaz a zdravotn√≠ dokumentaci' },
          { id: 3, text: 'Zajistit z√°sobu krmiva' },
          { id: 4, text: 'Pokud nen√≠ nikdo: kontaktovat √∫tulek' },
        ]
      },
      {
        id: 'benefits',
        title: 'D√°vky a d≈Øchod',
        priority: 'important',
        description: 'Nƒõkter√© d√°vky se ve vƒõzen√≠ zastavuj√≠, jin√© ne.',
        conditions: [{ field: 'finance', includes: 'benefits' }],
        checklist: [
          { id: 1, text: 'Zjistit, kter√© d√°vky se zastav√≠ a kter√© ne' },
          { id: 2, text: 'Informovat √ö≈ôad pr√°ce o n√°stupu' },
          { id: 3, text: 'Informovat ƒåSSZ (pokud pob√≠r√°≈° d≈Øchod)' },
          { id: 4, text: 'Domluvit, kam pos√≠lat p≈ô√≠padn√© platby' },
        ]
      },

      // NICE TO HAVE - P≈ò√çPRAVA
      {
        id: 'documents',
        title: 'D≈Øle≈æit√© dokumenty',
        priority: 'nice_to_have',
        description: 'Co si vz√≠t s sebou a co nechat doma.',
        conditions: [],
        checklist: [
          { id: 1, text: 'Obƒçansk√Ω pr≈Økaz (povinn√©!)' },
          { id: 2, text: 'Kartiƒçka zdravotn√≠ho poji≈°tƒõn√≠' },
          { id: 3, text: 'Rozsudek' },
          { id: 4, text: 'P≈ôedvol√°n√≠ k n√°stupu' },
          { id: 5, text: 'L√©ka≈ôsk√© zpr√°vy (pokud m√°≈°)' },
          { id: 6, text: 'Seznam kontakt≈Ø na pap√≠≈ôe' },
        ]
      },
      {
        id: 'what-to-pack',
        title: 'Co si vz√≠t s sebou',
        priority: 'nice_to_have',
        description: 'Seznam povolen√Ωch vƒõc√≠. Vƒõznice m≈Ø≈æe nƒõkter√© odm√≠tnout.',
        conditions: [],
        tips: ['Neber nic cenn√©ho - mohlo by se ztratit. Pen√≠ze, telefon a ≈°perky nech doma.'],
        checklist: [
          { id: 1, text: 'Z√°kladn√≠ hygiena (m√Ωdlo, zubn√≠ pasta, kart√°ƒçek)' },
          { id: 2, text: 'Spodn√≠ pr√°dlo a pono≈æky (max 5 kus≈Ø)' },
          { id: 3, text: 'Tepl√°ky nebo py≈æamo' },
          { id: 4, text: 'Fotky rodiny (max 5 kus≈Ø)' },
          { id: 5, text: 'Kniha nebo ƒçasopis' },
          { id: 6, text: 'Kontakty na bl√≠zk√© NAPSAN√â NA PAP√ç≈òE' },
          { id: 7, text: 'Pen√≠ze NENECH doma (bude≈° je m√≠t na kontƒõ ve vƒõznici)' },
        ]
      },
      {
        id: 'phone-contracts',
        title: 'Telefon a smlouvy',
        priority: 'nice_to_have',
        description: 'Co s telefonem a tarify bƒõhem trestu.',
        conditions: [],
        checklist: [
          { id: 1, text: 'Zru≈°it nebo pozastavit telefonn√≠ tarif' },
          { id: 2, text: 'Zru≈°it nepot≈ôebn√© p≈ôedplatn√© (Netflix, Spotify...)' },
          { id: 3, text: 'Z√°lohovat d≈Øle≈æit√© kontakty' },
          { id: 4, text: 'Zjistit pravidla pro vol√°n√≠ z vƒõznice' },
          { id: 5, text: 'Napsat d≈Øle≈æit√° ƒç√≠sla na pap√≠r' },
        ]
      },
      {
        id: 'mail-databox',
        title: 'Po≈°ta a datov√° schr√°nka',
        priority: 'nice_to_have',
        description: '√ö≈ôedn√≠ dopisy budou chodit d√°l. Zajisti, ≈æe je nƒõkdo vyzvedne.',
        conditions: [],
        checklist: [
          { id: 1, text: 'Domluvit nƒõkoho, kdo bude vyb√≠rat po≈°tu' },
          { id: 2, text: 'Zv√°≈æit p≈ôesmƒõrov√°n√≠ po≈°ty' },
          { id: 3, text: 'Pokud m√°≈° datovou schr√°nku: nastavit p≈ô√≠stup nƒõkomu dal≈°√≠mu' },
          { id: 4, text: 'D√°t plnou moc pro p≈ôeb√≠r√°n√≠ z√°silek' },
        ]
      },
    ];

    // =====================================================
    // HOOKS & UTILS
    // =====================================================

    function useLocalStorage(key, initialValue) {
      const [value, setValue] = useState(() => {
        try {
          const stored = localStorage.getItem(key);
          return stored ? JSON.parse(stored) : initialValue;
        } catch {
          return initialValue;
        }
      });

      useEffect(() => {
        localStorage.setItem(key, JSON.stringify(value));
      }, [key, value]);

      return [value, setValue];
    }

    function generatePlan(responses) {
      // Filtruj polo≈æky podle podm√≠nek
      let items = PLAN_ITEMS.filter(item => {
        if (item.conditions.length === 0) return true;
        return item.conditions.some(cond => {
          const userValue = responses[cond.field] || [];
          if (Array.isArray(userValue)) {
            return userValue.includes(cond.includes);
          }
          return userValue === cond.includes;
        });
      });

      // √öprava priorit podle ƒçasu
      if (responses.timeframe && ['days', '2weeks'].includes(responses.timeframe[0])) {
        items = items.map(item => {
          if (item.priority === 'nice_to_have') {
            return { ...item, priority: 'important' };
          }
          return item;
        });
      }

      // Se≈ôadit podle priority
      return items.sort((a, b) => {
        const order = { critical: 0, important: 1, nice_to_have: 2 };
        return order[a.priority] - order[b.priority];
      });
    }

    // =====================================================
    // KOMPONENTY
    // =====================================================

    function LandingScreen({ onStart, onFamily, onExpert }) {
      return (
        <div className="screen">
          <h1 id="dostal-jsi-rozsudek-a-nev-co-dlat">Dostal jsi rozsudek a nev√≠≈° co dƒõlat?</h1>
          <p>Pom≈Ø≈æeme ti zorientovat se. Za 10 minut bude≈° m√≠t jasn√Ω pl√°n, co vy≈ô√≠dit p≈ôed n√°stupem.</p>

          <button
            onClick={onStart}
            style={{
              background: 'linear-gradient(135deg, #38b4e0, #158ebf)',
              color: 'white',
              border: 'none',
              width: '100%',
              fontSize: '18px',
              padding: '18px',
              fontWeight: '600'
            }}>
            Zaƒç√≠t ‚Üí
          </button>

          <p style={{ marginTop: '32px', color: '#666', fontSize: '14px' }}>Nebo:</p>
          <button onClick={onFamily} className="option">üë®‚Äçüë©‚Äçüëß Jsem bl√≠zk√Ω odsouzen√©ho</button>
          <button onClick={onExpert} className="option">üëî Jsem odborn√≠k v poradnƒõ</button>

          <div className="contact-card" style={{ marginTop: '24px' }}>
            <strong>üìû Pot≈ôebuje≈° pomoct hned?</strong><br/>
            Krizov√° linka: <a href="tel:116123">116 123</a> (24/7, zdarma)
          </div>

          <div className="footer">
            Projekt vznikl ve spolupr√°ci s <a href="https://sovia.cz" target="_blank" rel="noopener">Sovia z.s.</a>
            <br /><small>M√°m rozsudek a co d√°l?</small>
          </div>
        </div>
      );
    }

    function DiagnosticScreen({ question, questionIndex, totalQuestions, responses, onAnswer, onNext, onBack }) {
      const q = question;
      const currentValue = responses[q.id] || [];

      const handleOptionClick = (optionId, exclusive) => {
        let newValue;
        if (q.multiSelect) {
          if (exclusive) {
            newValue = [optionId];
          } else {
            if (currentValue.includes(optionId)) {
              newValue = currentValue.filter(v => v !== optionId);
            } else {
              newValue = [...currentValue.filter(v => {
                const opt = q.options.find(o => o.id === v);
                return !opt?.exclusive;
              }), optionId];
            }
          }
        } else {
          newValue = [optionId];
        }
        onAnswer(q.id, newValue);
      };

      const canContinue = currentValue.length > 0;

      return (
        <div className="screen">
          <div className="progress">
            <div className="progress-bar" style={{ width: `${((questionIndex + 1) / totalQuestions) * 100}%` }} />
          </div>
          <small style={{ color: '#666' }}>Krok {questionIndex + 1} z {totalQuestions}</small>

          <h2 style={{ marginTop: '16px' }}>{q.question}</h2>
          <p style={{ color: '#666' }}>{q.subtext}</p>

          <div style={{ marginTop: '20px' }}>
            {q.options.map(opt => (
              <button
                key={opt.id}
                className={`option ${currentValue.includes(opt.id) ? 'selected' : ''}`}
                onClick={() => handleOptionClick(opt.id, opt.exclusive)}
              >
                <span style={{ fontSize: '20px', marginRight: '8px' }}>{opt.emoji}</span>
                {opt.label}
              </button>
            ))}
          </div>

          {q.multiSelect && <small style={{ color: '#888', display: 'block', marginTop: '8px' }}>üí° M≈Ø≈æe≈° vybrat v√≠c mo≈ænost√≠</small>}

          <div className="nav-buttons">
            <button
              onClick={onBack}
              style={{ background: 'white', border: '1px solid #ddd' }}
            >
              ‚Üê Zpƒõt
            </button>
            <button
              onClick={onNext}
              disabled={!canContinue}
              style={{
                background: canContinue ? 'linear-gradient(135deg, #38b4e0, #158ebf)' : '#ccc',
                color: 'white',
                border: 'none',
                opacity: canContinue ? 1 : 0.5
              }}
            >
              Pokraƒçovat ‚Üí
            </button>
          </div>
        </div>
      );
    }

    function PlanScreen({ plan, completed, onItemClick, onReset }) {
      const completedCount = plan.reduce((acc, item) =>
        acc + item.checklist.filter(c => completed[`${item.id}:${c.id}`]).length, 0
      );
      const totalCount = plan.reduce((acc, item) => acc + item.checklist.length, 0);
      const progress = totalCount > 0 ? (completedCount / totalCount) * 100 : 0;

      const priorityLabels = {
        critical: 'üî¥ UDƒöLEJ IHNED',
        important: 'üü° D≈ÆLE≈ΩIT√â',
        nice_to_have: 'üü¢ P≈òED N√ÅSTUPEM'
      };

      return (
        <div className="screen">
          <h1 id="tvj-pln">Tv≈Øj pl√°n</h1>
          <p style={{ marginBottom: '8px' }}>
            P≈ôipravili jsme ti seznam vƒõc√≠ na z√°kladƒõ tv√© situace.
          </p>
          <p style={{ fontWeight: '600', color: '#38b4e0' }}>
            Hotovo: {completedCount} / {totalCount} √∫kol≈Ø
          </p>

          <div className="progress">
            <div className="progress-bar" style={{ width: `${progress}%` }} />
          </div>

          {['critical', 'important', 'nice_to_have'].map(priority => {
            const items = plan.filter(i => i.priority === priority);
            if (items.length === 0) return null;

            return (
              <div key={priority}>
                <h3 style={{ marginTop: '28px', marginBottom: '12px' }}>
                  {priorityLabels[priority]}
                </h3>
                {items.map(item => {
                  const itemCompleted = item.checklist.filter(c => completed[`${item.id}:${c.id}`]).length;
                  const itemTotal = item.checklist.length;
                  const isDone = itemCompleted === itemTotal;

                  return (
                    <div
                      key={item.id}
                      className={`plan-item priority-${priority === 'nice_to_have' ? 'nice' : priority}`}
                      onClick={() => onItemClick(item)}
                      style={{ cursor: 'pointer', opacity: isDone ? 0.7 : 1 }}
                    >
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>
                        <h3 style={{ textDecoration: isDone ? 'line-through' : 'none' }}>{item.title}</h3>
                        {isDone && <span style={{ color: '#10b981', fontSize: '20px' }}>‚úì</span>}
                      </div>
                      <p style={{ color: '#666', fontSize: '14px', marginBottom: '8px' }}>{item.description}</p>
                      <small style={{ color: '#888' }}>{itemCompleted} / {itemTotal} hotovo</small>
                    </div>
                  );
                })}
              </div>
            );
          })}

          <div className="contact-card" style={{ marginTop: '32px' }}>
            <strong>üìû Pot≈ôebuje≈° pomoct?</strong><br/>
            Krizov√° linka: <a href="tel:116123">116 123</a> (24/7, zdarma)
          </div>

          <div className="footer">
            <button
              onClick={onReset}
              style={{ fontSize: '14px', background: 'white', border: '1px solid #ddd' }}
            >
              Zaƒç√≠t znovu
            </button>
            <br /><br />
            Projekt <a href="https://sovia.cz" target="_blank" rel="noopener">Sovia z.s.</a> ‚Äì M√°m rozsudek a co d√°l?
          </div>
        </div>
      );
    }

    function ItemDetailScreen({ item, completed, onToggle, onBack }) {
      const itemCompleted = item.checklist.filter(c => completed[`${item.id}:${c.id}`]).length;
      const itemTotal = item.checklist.length;

      return (
        <div className="screen">
          <button
            onClick={onBack}
            style={{ marginBottom: '16px', background: 'white', border: '1px solid #ddd' }}
          >
            ‚Üê Zpƒõt na pl√°n
          </button>

          <h1 id="itemtitle">{item.title}</h1>
          <p>{item.description}</p>

          <p style={{ fontWeight: '600', color: '#38b4e0', margin: '16px 0' }}>
            {itemCompleted} / {itemTotal} hotovo
          </p>

          {item.warning && (
            <div className="warning">
              ‚ö†Ô∏è {item.warning}
            </div>
          )}

          {item.tips && item.tips.map((tip, i) => (
            <div key={i} className="tip">
              üí° {tip}
            </div>
          ))}

          <h3 style={{ marginTop: '24px', marginBottom: '16px' }}>Co je pot≈ôeba udƒõlat:</h3>

          {item.checklist.map(check => {
            const key = `${item.id}:${check.id}`;
            const isChecked = !!completed[key];
            return (
              <label key={check.id} className="checklist-item" style={{ cursor: 'pointer' }}>
                <input
                  type="checkbox"
                  checked={isChecked}
                  onChange={() => onToggle(key)}
                />
                <span style={{
                  textDecoration: isChecked ? 'line-through' : 'none',
                  color: isChecked ? '#999' : '#333'
                }}>
                  {check.text}
                </span>
              </label>
            );
          })}

          <div className="contact-card" style={{ marginTop: '32px' }}>
            <strong>üìû Pot≈ôebuje≈° pomoct?</strong><br/>
            Krizov√° linka: <a href="tel:116123">116 123</a> (24/7, zdarma)
          </div>
        </div>
      );
    }

    function FamilyScreen({ onBack }) {
      return (
        <div className="screen">
          <button onClick={onBack} style={{ background: 'white', border: '1px solid #ddd' }}>‚Üê Zpƒõt</button>

          <h1 style={{ marginTop: '16px' }}>Pro rodiny a bl√≠zk√©</h1>
          <p>Tv≈Øj bl√≠zk√Ω nastupuje do v√Ωkonu trestu. Je to tƒõ≈æk√° situace pro v√°s oba. Tady jsou informace, kter√© ti pom≈Ø≈æou.</p>

          <h3 style={{ marginTop: '24px' }}>Jak mu pomoci TEƒé</h3>
          <ul style={{ paddingLeft: '20px', marginBottom: '16px' }}>
            <li>Pomoz mu s checklistem vƒõc√≠ k vy≈ô√≠zen√≠</li>
            <li>Nab√≠dni se, ≈æe nƒõco vy≈ô√≠d√≠≈° za nƒõj (√∫≈ôady, smlouvy...)</li>
            <li>Doprovod ho k br√°nƒõ vƒõznice - je to d≈Øle≈æitƒõj≈°√≠, ne≈æ si mysl√≠≈°</li>
            <li>Buƒè trpƒõliv√Ω - m≈Ø≈æe b√Ωt ve stresu nebo ≈°oku</li>
          </ul>

          <h3 id="co-nepomh">Co NEPOM√ÅH√Å</h3>
          <ul style={{ paddingLeft: '20px', marginBottom: '16px' }}>
            <li>"J√° ti to ≈ô√≠kal/a"</li>
            <li>"Ty ses do toho dostal s√°m"</li>
            <li>Vyh√Ωb√°n√≠ se t√©matu</li>
            <li>P≈ôedst√≠r√°n√≠, ≈æe se nic nedƒõje</li>
          </ul>

          <h3 id="komunikace-bhem-trestu">Komunikace bƒõhem trestu</h3>
          <ul style={{ paddingLeft: '20px', marginBottom: '16px' }}>
            <li><strong>N√°v≈°tƒõvy:</strong> obvykle 1x za 2-3 t√Ωdny, mus√≠≈° b√Ωt na seznamu</li>
            <li><strong>Dopisy:</strong> m≈Ø≈æe≈° ps√°t kdykoliv, jsou kontrolovan√©</li>
            <li><strong>Telefony:</strong> vol√° on tobƒõ, z kreditu</li>
            <li><strong>Pen√≠ze:</strong> pos√≠l√°≈° na vƒõze≈àsk√Ω √∫ƒçet</li>
          </ul>

          <div className="contact-card">
            <strong>üìû Linka pro rodiny odsouzen√Ωch</strong><br/>
            <a href="tel:116123">116 123</a> (24/7, zdarma)
          </div>

          <div className="footer">
            Projekt <a href="https://sovia.cz" target="_blank" rel="noopener">Sovia z.s.</a>
          </div>
        </div>
      );
    }

    function ExpertScreen({ onBack }) {
      return (
        <div className="screen">
          <button onClick={onBack} style={{ background: 'white', border: '1px solid #ddd' }}>‚Üê Zpƒõt</button>

          <h1 style={{ marginTop: '16px' }}>Pro odborn√≠ky</h1>
          <p>Tento n√°stroj m≈Ø≈æete vyu≈æ√≠t p≈ôi pr√°ci s klienty p≈ôed n√°stupem do VTOS.</p>

          <h3 style={{ marginTop: '24px' }}>Jak n√°stroj vyu≈æ√≠t</h3>
          <ul style={{ paddingLeft: '20px', marginBottom: '16px' }}>
            <li>Projdƒõte diagnostiku spoleƒçnƒõ s klientem</li>
            <li>Vygenerovan√Ω pl√°n slou≈æ√≠ jako z√°klad pro dal≈°√≠ pr√°ci</li>
            <li>Checklisty lze vytisknout (Ctrl+P)</li>
            <li>Klient si m≈Ø≈æe pl√°n ulo≈æit na sv√©m telefonu</li>
          </ul>

          <h3 id="o-projektu">O projektu</h3>
          <p>
            N√°stroj vznikl v r√°mci projektu "M√°m rozsudek a co d√°l?" organizace Sovia z.s.
            na z√°kladƒõ v√Ωzkumu s prvnƒõ odsouzen√Ωmi.
          </p>

          <div className="contact-card">
            <strong>üìß Kontakt pro odborn√≠ky</strong><br/>
            <a href="mailto:sovia@sovia.cz">sovia@sovia.cz</a>
          </div>

          <div className="footer">
            Projekt <a href="https://sovia.cz" target="_blank" rel="noopener">Sovia z.s.</a> ‚Äì M√°m rozsudek a co d√°l?
          </div>
        </div>
      );
    }

    // =====================================================
    // MAIN APP
    // =====================================================

    function App() {
      const [screen, setScreen] = useState('landing');
      const [questionIndex, setQuestionIndex] = useState(0);
      const [responses, setResponses] = useLocalStorage('vtos-responses-v2', {});
      const [completed, setCompleted] = useLocalStorage('vtos-completed-v2', {});
      const [selectedItem, setSelectedItem] = useState(null);

      const plan = useMemo(() => generatePlan(responses), [responses]);

      const handleAnswer = (field, value) => {
        setResponses(prev => ({ ...prev, [field]: value }));
      };

      const handleNext = () => {
        if (questionIndex < DIAGNOSTIC_QUESTIONS.length - 1) {
          setQuestionIndex(prev => prev + 1);
        } else {
          setScreen('plan');
        }
      };

      const handleBack = () => {
        if (questionIndex > 0) {
          setQuestionIndex(prev => prev - 1);
        } else {
          setScreen('landing');
        }
      };

      const handleToggle = (key) => {
        setCompleted(prev => ({ ...prev, [key]: !prev[key] }));
      };

      const handleReset = () => {
        setResponses({});
        setCompleted({});
        setQuestionIndex(0);
        setScreen('landing');
      };

      if (screen === 'landing') {
        return (
          <LandingScreen
            onStart={() => setScreen('diagnostic')}
            onFamily={() => setScreen('family')}
            onExpert={() => setScreen('expert')}
          />
        );
      }

      if (screen === 'diagnostic') {
        return (
          <DiagnosticScreen
            question={DIAGNOSTIC_QUESTIONS[questionIndex]}
            questionIndex={questionIndex}
            totalQuestions={DIAGNOSTIC_QUESTIONS.length}
            responses={responses}
            onAnswer={handleAnswer}
            onNext={handleNext}
            onBack={handleBack}
          />
        );
      }

      if (screen === 'plan') {
        return (
          <PlanScreen
            plan={plan}
            completed={completed}
            onItemClick={(item) => { setSelectedItem(item); setScreen('detail'); }}
            onReset={handleReset}
          />
        );
      }

      if (screen === 'detail' && selectedItem) {
        return (
          <ItemDetailScreen
            item={selectedItem}
            completed={completed}
            onToggle={handleToggle}
            onBack={() => setScreen('plan')}
          />
        );
      }

      if (screen === 'family') {
        return <FamilyScreen onBack={() => setScreen('landing')} />;
      }

      if (screen === 'expert') {
        return <ExpertScreen onBack={() => setScreen('landing')} />;
      }

      return <div>Nƒõco se pokazilo...</div>;
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>