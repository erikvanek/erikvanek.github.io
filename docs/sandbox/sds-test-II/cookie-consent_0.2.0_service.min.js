/*!
 * Goc Cookie Consent Helper
 * Copyright(c) 2021 Ministerstvo vnitra České republiky
 * Copyright(c) 2021 Zdenek Vitek
 * EUPL v1.2 Licensed
 *
 * Version 0.2.0-5
 */
!function(){"use strict";const e="denied",t="granted",n=[e,t,"dismiss"],o=e=>{const t=(" "+document.cookie).split(" "+e+"=");return t.length<2?void 0:t.pop().split(";").shift()},r=(e,t,n=365,o=null,r=null,s=!1)=>{const i=new Date;i.setHours(i.getHours()+24*("number"!=typeof n?365:n)),document.cookie=e+"="+t+";expires="+i.toUTCString()+";path="+(r||"/")+(o?";domain="+o:"")+(s?";secure":"")},s=e=>n.indexOf(e)>=0,i=e=>(t,[n,o])=>(o instanceof Object&&!(o instanceof Array)?e[n]instanceof Object&&!(e[n]instanceof Array)?t[n]=Object.entries(o).reduce(i(e[n]),{}):t[n]=o:e.hasOwnProperty(n)?t[n]=e[n]:t[n]=o,t),a=(e,t)=>Object.entries(e).reduce(i(t),{}),c={enabled:!0,container:document.body,prefix:"gcc",cookie:{path:"/",domain:"localhost",expiryDays:365,secure:!1},events:{initialized:"initialized",openPreferences:"open-cookie-preferences-purposes",closePreferences:"close-cookie-preferences-purposes",consentBarMounted:"consent-bar-mounted",consentBarDestroyed:"consent-bar-destroyed",dialogMounted:"dialog-mounted",dialogDestroyed:"dialog-destroyed",consentChanged:"modified",consentsGranted:"granted"},categories:[{key:"necessary",name:"Nezbytné cookies",copy:"Bez těchto cookies stránky nefungují správně, po zavření prohlížeče se automaticky smažou (např. správné zobrazení stránky, session id, nastavení souhlasů)."},{key:"functionality",name:"Funkční cookies",copy:"Trvalé cookies si dokážou zapamatovat nastavení uživatele, takže příště nemusí zadávat údaje, které již použil (např. uživatelské jméno, jazyk)."},{key:"analytics",name:"Statistické a výkonnostní cookies",copy:"Pomáhají anonymně zjišťovat, jaké stránky na webu jsou oblíbené a jak je uživatelé využívají, tyto informace slouží k dalšímu zlepšování a úpravám stránek."},{key:"personalization",name:"Reklamní cookies",copy:"Zjišťují, jaký typ reklam uživatele oslovuje a umožňují zobrazovat mu reklamy, které jsou více relevantní."}],forcedCategoryKeys:["necessary"],messagesPath:null},l=new class{constructor(){this.events={}}on(e,t){return void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),function(){this.removeListener(e,t)}}off(e,t){void 0===e&&void 0===t?this.events={}:void 0===t?delete this.events[e]:-1!==this.events[e].indexOf(t)&&this.events[e].splice(this.events[e].indexOf(t),1)}emit(e,...t){if(void 0!==this.events[e])for(const n of this.events[e])n(...t);"*"!==e&&this.emit("*",...t);const n=new CustomEvent(this._options.prefix+"_"+e,{detail:Object.assign({},t),bubbles:!0,cancelable:!0,composed:!1});document.dispatchEvent(n)}once(e,t){return this.on(e,(()=>{this.emit(e),this.off(e,t)}))}setOptions(e){this._options=e}};class d{constructor(e){this._options=e,this._emitter=l,this._emitter.setOptions(e)}get defaultOptions(){return c}get emitter(){return this._emitter}get options(){return this._options}}class u extends d{get clientCookieData(){return this._options.categories.map((e=>{const t=this.preparePrefixedKey(e.key),n=o(t);return s(n)?{key:e.key,status:n,prefixedKey:this.preparePrefixedKey(e.key)}:void 0})).filter((e=>e||!1))}get clientPreferences(){const{categories:n,forcedCategoryKeys:o}=this._options;return n.map((n=>{if(-1!==o.indexOf(n.key))return{status:t,key:n.key,prefixedKey:this.preparePrefixedKey(n.key)};const r=this.clientCookieData.find((e=>e.key===n.key))||null;return r?{status:r.status,key:n.key}:{status:e,key:n.key,prefixedKey:this.preparePrefixedKey(n.key)}}))}setClientPreferences(e){const t=e.map((e=>{const{cookie:t}=this._options,n=this.preparePrefixedKey(e.key);return r(n,e.status,t.expiryDays,t.domain,t.path,t.secure),{status:e.status,key:e.key,prefixedKey:n}}));this.emitter.emit(this._options.events.consentChanged,t)}allowAll(){const{categories:e}=this._options;let n=[];e.map((e=>n.push({status:t,key:e.key,prefixedKey:this.preparePrefixedKey(e.key)}))),this.setClientPreferences(n)}denyAll(){const{categories:n,forcedCategoryKeys:o}=this._options;let r=[];n.map((n=>{let s=e;-1!==o.indexOf(n.key)&&(s=t),r.push({status:s,key:n.key,prefixedKey:this.preparePrefixedKey(n.key)})})),this.setClientPreferences(r)}preparePrefixedKey(e){const{prefix:t}=this._options;return t+"_"+e}}class p extends d{openPreferences(){const{events:e}=this._options;document.dispatchEvent(new CustomEvent(e.openPreferences,{bubbles:!0}))}}class f extends d{constructor(e,t){super(t),this._messages=e,this._storage=new u(t),this._controller=new p(t)}get storage(){return this._storage}get controller(){return this._controller}get m(){return this._messages}get preferenceCategories(){return this._options.categories}get disabledCategories(){return this._options.forcedCategoryKeys}reinitMessages(e){this._messages=e}}const h={consentBar:{headline:"Můžeme si u vás uložit cookies?",copy:"Co že to znamená? Cookies jsou malé datové soubory, které slouží např. k tomu, aby si web pamatoval vaše nastavení a to, co vás zajímá, nebo abychom jej zlepšovali. Pro ukládání různých typů cookies od vás potřebujeme souhlas. Web bude fungovat i bez souhlasu, s ním ale o něco lépe.",ctaAcceptAll:"Souhlasím se všemi",ctaDeclineAll:"Odmítnout všechny",ctaPreferences:"Podrobné nastavení"},preferencesDialog:{headline:"Nastavení souhlasů s cookies",copy:"Při vašich návštěvách webů z domény gov.cz používáme níže uvedené typy cookies. Vy nám udělujete souhlas k použití všech, nebo jen vybraných typů. Vaše dříve udělené souhlasy zde můžete upravit.",ctaSave:"Uložit nastavení",information:'Více informací o cookies a zpracování dat naleznete v <a href="https://portal.gov.cz/tiraz/osobni-udaje-a-cookies" rel="nofollow" target="_blank">Zpracování osobních údajů a cookies</a>.'}},m=e=>a(h,e);function v(){}function y(e){return e()}function g(){return Object.create(null)}function k(e){e.forEach(y)}function _(e){return"function"==typeof e}function b(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function $(e,t){e.appendChild(t)}function x(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode.removeChild(e)}function C(e){return document.createElement(e)}function D(e){return document.createTextNode(e)}function P(){return D(" ")}function j(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function E(e){return function(t){return t.preventDefault(),e.call(this,t)}}function z(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function B(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}let O;function A(e){O=e}function M(){if(!O)throw new Error("Function called outside component initialization");return O}function K(e){M().$$.on_mount.push(e)}function L(e){M().$$.on_destroy.push(e)}const T=[],H=[],S=[],N=[],V=Promise.resolve();let I=!1;function Z(e){S.push(e)}let G=!1;const R=new Set;function q(){if(!G){G=!0;do{for(let e=0;e<T.length;e+=1){const t=T[e];A(t),F(t.$$)}for(A(null),T.length=0;H.length;)H.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];R.has(t)||(R.add(t),t())}S.length=0}while(T.length);for(;N.length;)N.pop()();I=!1,G=!1,R.clear()}}function F(e){if(null!==e.fragment){e.update(),k(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Z)}}const U=new Set;let W;function J(){W={r:0,c:[],p:W}}function Q(){W.r||k(W.c),W=W.p}function X(e,t){e&&e.i&&(U.delete(e),e.i(t))}function Y(e,t,n,o){if(e&&e.o){if(U.has(e))return;U.add(e),W.c.push((()=>{U.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}function ee(e){e&&e.c()}function te(e,t,n,o){const{fragment:r,on_mount:s,on_destroy:i,after_update:a}=e.$$;r&&r.m(t,n),o||Z((()=>{const t=s.map(y).filter(_);i?i.push(...t):k(t),e.$$.on_mount=[]})),a.forEach(Z)}function ne(e,t){const n=e.$$;null!==n.fragment&&(k(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function oe(e,t){-1===e.$$.dirty[0]&&(T.push(e),I||(I=!0,V.then(q)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function re(e,t,n,o,r,s,i,a=[-1]){const c=O;A(e);const l=e.$$={fragment:null,ctx:null,props:s,update:v,not_equal:r,bound:g(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:g(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};i&&i(l.root);let d=!1;if(l.ctx=n?n(e,t.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return l.ctx&&r(l.ctx[t],l.ctx[t]=s)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](s),d&&oe(e,t)),n})):[],l.update(),d=!0,k(l.before_update),l.fragment=!!o&&o(l.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);l.fragment&&l.fragment.l(e),e.forEach(w)}else l.fragment&&l.fragment.c();t.intro&&X(e.$$.fragment),te(e,t.target,t.anchor,t.customElement),q()}A(c)}class se{$destroy(){ne(this,1),this.$destroy=v}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ie(e){let t,n,o,r,s,i,a,c,l,d,u,p,f,h,m,y,g,_,b,O,A=e[1].consentBar.headline+"",M=e[1].consentBar.copy+"",K=e[1].consentBar.ctaAcceptAll+"",L=e[1].consentBar.ctaDeclineAll+"",T=e[1].consentBar.ctaPreferences+"";return{c(){t=C("div"),n=C("div"),o=C("div"),r=C("h3"),s=D(A),i=P(),a=C("p"),c=P(),l=C("div"),d=C("div"),u=C("button"),p=D(K),f=P(),h=C("button"),m=D(L),y=P(),g=C("button"),_=D(T),z(a,"class","gov-note u-color--grey-mid"),z(u,"type","button"),z(u,"class","gov-button gov-button--primary"),z(h,"type","button"),z(h,"class","gov-button gov-button--primary-outlined"),z(d,"class","gov-cookie-bar__actions-primary"),z(g,"type","button"),z(g,"class","gov-button"),z(l,"class","gov-cookie-bar__actions"),z(o,"class","gov-cookie-bar__content-inner"),z(n,"class","gov-cookie-bar__content"),z(t,"class","gov-cookie-bar")},m(v,k){x(v,t,k),$(t,n),$(n,o),$(o,r),$(r,s),$(o,i),$(o,a),a.innerHTML=M,$(o,c),$(o,l),$(l,d),$(d,u),$(u,p),$(d,f),$(d,h),$(h,m),$(l,y),$(l,g),$(g,_),e[7](t),b||(O=[j(u,"click",E(e[3])),j(h,"click",E(e[4])),j(g,"click",E(e[2]))],b=!0)},p(e,[t]){2&t&&A!==(A=e[1].consentBar.headline+"")&&B(s,A),2&t&&M!==(M=e[1].consentBar.copy+"")&&(a.innerHTML=M),2&t&&K!==(K=e[1].consentBar.ctaAcceptAll+"")&&B(p,K),2&t&&L!==(L=e[1].consentBar.ctaDeclineAll+"")&&B(m,L),2&t&&T!==(T=e[1].consentBar.ctaPreferences+"")&&B(_,T)},i:v,o:v,d(n){n&&w(t),e[7](null),b=!1,k(O)}}}function ae(e,t,n){let o,r,{provider:s}=t,{hide:i}=t;K((()=>s.emitter.emit(s.options.events.consentBarMounted))),L((()=>s.emitter.emit(s.options.events.consentBarDestroyed)));return e.$$set=e=>{"provider"in e&&n(5,s=e.provider),"hide"in e&&n(6,i=e.hide)},e.$$.update=()=>{32&e.$$.dirty&&n(1,o=s.m)},[r,o,()=>{s.controller.openPreferences(),i()},()=>{s.storage.allowAll(),i()},()=>{s.storage.denyAll(),i()},s,i,function(e){H[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class ce extends se{constructor(e){super(),re(this,e,ae,ie,b,{provider:5,hide:6})}}function le(e,t,n){const o=e.slice();return o[8]=t[n],o}function de(e){let t,n,o,r,s,i,a,c,l,d,u,p,f,h,m,y,g,k=e[8].name+"",_=e[8].copy&&function(e){let t,n=e[8].copy+"";return{c(){t=C("p")},m(e,o){x(e,t,o),t.innerHTML=n},p:v,d(e){e&&w(t)}}}(e);return{c(){t=C("li"),n=C("input"),c=P(),l=C("label"),d=D(k),u=P(),_&&_.c(),f=P(),h=C("span"),m=P(),z(n,"class","gov-form-control__checkbox"),z(n,"type","checkbox"),z(n,"aria-required","false"),z(n,"aria-disabled",o=e[0](e[8].key)),z(n,"name",r=e[8].key),z(n,"id",s="consent-"+e[8].key),n.checked=i=e[1](e[8].key),n.disabled=a=e[0](e[8].key),z(l,"class","gov-form-control__label"),z(l,"for",p="consent-"+e[8].key),z(h,"class","gov-form-control__indicator"),z(t,"class","gov-form-group__item")},m(o,r){x(o,t,r),$(t,n),$(t,c),$(t,l),$(l,d),$(l,u),_&&_.m(l,null),$(t,f),$(t,h),$(t,m),y||(g=j(n,"change",e[3]),y=!0)},p(e,t){1&t&&o!==(o=e[0](e[8].key))&&z(n,"aria-disabled",o),2&t&&i!==(i=e[1](e[8].key))&&(n.checked=i),1&t&&a!==(a=e[0](e[8].key))&&(n.disabled=a),e[8].copy&&_.p(e,t)},d(e){e&&w(t),_&&_.d(),y=!1,g()}}}function ue(e){let t,n,o=e[2],r=[];for(let t=0;t<o.length;t+=1)r[t]=de(le(e,o,t));return{c(){t=C("div"),n=C("ul");for(let e=0;e<r.length;e+=1)r[e].c();z(n,"class","gov-form-group gov-form-group--complex"),z(t,"class","gov-form-control gov-form-control--custom")},m(e,o){x(e,t,o),$(t,n);for(let e=0;e<r.length;e+=1)r[e].m(n,null)},p(e,[t]){if(15&t){let s;for(o=e[2],s=0;s<o.length;s+=1){const i=le(e,o,s);r[s]?r[s].p(i,t):(r[s]=de(i),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=o.length}},i:v,o:v,d(e){e&&w(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(r,e)}}}function pe(n,o,r){let s,i,{provider:a}=o;let c=a.storage.clientPreferences,l=a.preferenceCategories,d=a.disabledCategories;return n.$$set=e=>{"provider"in e&&r(4,a=e.provider)},n.$$.update=()=>{64&n.$$.dirty&&r(1,s=e=>{const n=c.find((t=>t.key===e))||null;return!!n&&n.status===t})},r(0,i=e=>-1!==d.indexOf(e)),[i,s,l,n=>{const o=n.target,{name:s,checked:i}=o,a=i?t:e,l=c.findIndex((e=>e.key===s));-1!==l&&r(6,c[l].status=a,c)},a,()=>c,c]}class fe extends se{constructor(e){super(),re(this,e,pe,ue,b,{provider:4,consentPreferences:5})}get consentPreferences(){return this.$$.ctx[5]}}function he(e){let t,n=e[4].preferencesDialog.copy+"";return{c(){t=C("p")},m(e,o){x(e,t,o),t.innerHTML=n},p(e,o){16&o&&n!==(n=e[4].preferencesDialog.copy+"")&&(t.innerHTML=n)},d(e){e&&w(t)}}}function me(e){let t,n=e[4].preferencesDialog.information+"";return{c(){t=C("p")},m(e,o){x(e,t,o),t.innerHTML=n},p(e,o){16&o&&n!==(n=e[4].preferencesDialog.information+"")&&(t.innerHTML=n)},d(e){e&&w(t)}}}function ve(e){let t,n,o,r,s,i,a,c,l,d,u,p,f,h,m,v,y,g,b,O,A=e[4].preferencesDialog.headline+"",M=e[4].preferencesDialog.ctaSave+"",K=e[4].preferencesDialog.copy&&he(e),L={provider:e[0]};l=new fe({props:L}),e[6](l);let T=e[4].preferencesDialog.information&&me(e);return{c(){t=C("div"),n=C("div"),o=C("div"),r=C("h2"),s=D(A),i=P(),a=C("div"),K&&K.c(),c=P(),ee(l.$$.fragment),d=P(),T&&T.c(),u=P(),p=C("button"),f=D(M),h=P(),m=C("button"),m.innerHTML='<span id="cookie-preferences-modal-close" class="u-sr-only gov-button__label">Zavřít</span>',v=P(),y=C("div"),z(o,"class","gov-modal__header"),z(p,"type","button"),z(p,"class","gov-button gov-button--primary"),z(a,"class","gov-modal__content-inner"),z(m,"class","gov-button gov-button--secondary gov-modal__close"),z(m,"type","button"),z(m,"aria-labelledby","cookie-preferences-modal-close"),z(n,"class","gov-modal__content"),z(y,"class","gov-modal__backdrop"),z(y,"role","button"),z(y,"aria-label","Zavřít"),z(t,"class","gov-modal is-active is-visible")},m(k,w){x(k,t,w),$(t,n),$(n,o),$(o,r),$(r,s),$(n,i),$(n,a),K&&K.m(a,null),$(a,c),te(l,a,null),$(a,d),T&&T.m(a,null),$(a,u),$(a,p),$(p,f),$(n,h),$(n,m),$(t,v),$(t,y),e[7](t),g=!0,b||(O=[j(p,"click",E(e[5])),j(m,"click",E((function(){_(e[1])&&e[1].apply(this,arguments)}))),j(y,"click",E((function(){_(e[1])&&e[1].apply(this,arguments)})))],b=!0)},p(t,[n]){e=t,(!g||16&n)&&A!==(A=e[4].preferencesDialog.headline+"")&&B(s,A),e[4].preferencesDialog.copy?K?K.p(e,n):(K=he(e),K.c(),K.m(a,c)):K&&(K.d(1),K=null);const o={};1&n&&(o.provider=e[0]),l.$set(o),e[4].preferencesDialog.information?T?T.p(e,n):(T=me(e),T.c(),T.m(a,u)):T&&(T.d(1),T=null),(!g||16&n)&&M!==(M=e[4].preferencesDialog.ctaSave+"")&&B(f,M)},i(e){g||(X(l.$$.fragment,e),g=!0)},o(e){Y(l.$$.fragment,e),g=!1},d(n){n&&w(t),K&&K.d(),e[6](null),ne(l),T&&T.d(),e[7](null),b=!1,k(O)}}}function ye(e,t,n){let o,r,s,{provider:i}=t,{hide:a}=t;K((()=>{i.emitter.emit(i.options.events.dialogMounted),document.addEventListener("keydown",c),document.body.style.overflow="hidden"})),L((()=>{i.emitter.emit(i.options.events.dialogDestroyed),document.removeEventListener("keydown",c),document.body.style.overflow="auto"}));const c=e=>{let t;t="key"in(e=e||window.event)?"Escape"===e.key||"Esc"===e.key:27===e.keyCode,t&&a()};return e.$$set=e=>{"provider"in e&&n(0,i=e.provider),"hide"in e&&n(1,a=e.hide)},e.$$.update=()=>{1&e.$$.dirty&&n(4,o=i.m)},[i,a,r,s,o,()=>{const e=s.consentPreferences();i.storage.setClientPreferences(e),a()},function(e){H[e?"unshift":"push"]((()=>{s=e,n(3,s)}))},function(e){H[e?"unshift":"push"]((()=>{r=e,n(2,r)}))}]}class ge extends se{constructor(e){super(),re(this,e,ye,ve,b,{provider:0,hide:1})}}function ke(e){let t,n;return t=new ce({props:{provider:e[0],hide:e[5]}}),{c(){ee(t.$$.fragment)},m(e,o){te(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.provider=e[0]),2&n&&(o.hide=e[5]),t.$set(o)},i(e){n||(X(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function _e(e){let t,n;return t=new ge({props:{provider:e[0],hide:e[6]}}),{c(){ee(t.$$.fragment)},m(e,o){te(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.provider=e[0]),4&n&&(o.hide=e[6]),t.$set(o)},i(e){n||(X(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function be(e){let t,n,o,r=e[1]&&ke(e),s=e[2]&&_e(e);return{c(){r&&r.c(),t=P(),s&&s.c(),n=D("")},m(e,i){r&&r.m(e,i),x(e,t,i),s&&s.m(e,i),x(e,n,i),o=!0},p(e,[o]){e[1]?r?(r.p(e,o),2&o&&X(r,1)):(r=ke(e),r.c(),X(r,1),r.m(t.parentNode,t)):r&&(J(),Y(r,1,1,(()=>{r=null})),Q()),e[2]?s?(s.p(e,o),4&o&&X(s,1)):(s=_e(e),s.c(),X(s,1),s.m(n.parentNode,n)):s&&(J(),Y(s,1,1,(()=>{s=null})),Q())},i(e){o||(X(r),X(s),o=!0)},o(e){Y(r),Y(s),o=!1},d(e){r&&r.d(e),e&&w(t),s&&s.d(e),e&&w(n)}}}function $e(e,t,n){let{provider:o}=t;let r=!o.storage.clientCookieData.length,s=!1;return e.$$set=e=>{"provider"in e&&n(0,o=e.provider)},[o,r,s,e=>n(1,r=e),e=>n(2,s=e),()=>n(1,r=!1),()=>n(2,s=!1)]}class xe extends se{constructor(e){super(),re(this,e,$e,be,b,{provider:0,displayBar:3,displayDialog:4})}get displayBar(){return this.$$.ctx[3]}get displayDialog(){return this.$$.ctx[4]}}window.COOKIE_SERVICE_VERSION="v0.2.0-4",window.CookieConsent=class{constructor(e={},t={}){const n=(e=>a(c,e))(e),o=m(t);this._provider=new f(o,n)}async init(){return this._provider.options.enabled?(await this._preloadMessages(),this._prepareDomContainers(),this._provider.emitter.emit(this._provider.options.events.initialized),this._mountContainer(),this._checkConsents(),this._prepareListeners(),Promise.resolve(!0)):Promise.resolve(!1)}_prepareListeners(){const{events:e}=this._provider.options;document.addEventListener(e.openPreferences,(()=>this._mountDialog())),document.addEventListener(e.closePreferences,(()=>this._destroyDialog())),window.CookieConsentController={preferences:{open:()=>this._mountDialog(),close:()=>this._destroyDialog()},bar:{open:()=>this._mountBar(),close:()=>this._destroyBar()}}}_mountDialog(){this._container.displayDialog(!0)}_destroyDialog(){this._container.displayDialog(!1)}_mountBar(){this._container.displayBar(!0)}_destroyBar(){this._container.displayBar(!1)}_checkConsents(){const{clientCookieData:e}=this._provider.storage;e.length&&this._provider.emitter.emit(this._provider.options.events.consentsGranted,e)}_mountContainer(){this._container=new xe({target:this._containerElement,props:{provider:this._provider}})}_prepareDomContainers(){const{container:e}=this._provider.options;if(!(e instanceof HTMLElement))throw new Error("Cookie consent container is not valid HTMLElement");this._containerElement=document.createElement("div"),this._containerElement.setAttribute("id","cookie-consent-container"),e.appendChild(this._containerElement)}on(e,t){this._provider.emitter.on(e,t)}async _preloadMessages(){const{messagesPath:e}=this._provider.options;if("string"!=typeof e)return Promise.resolve(!0);await fetch(e,{method:"GET"}).then((e=>e.json())).then((e=>{const t=m(e);this._provider.reinitMessages(t)})).then((()=>!0))}}}();
